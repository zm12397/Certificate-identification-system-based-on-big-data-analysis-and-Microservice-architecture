
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<title>主页</title>
<meta name="viewport"
	content="width=divice-width,intital-scale=1,maximum-scale=1,user-scalable=no"></meta>
<meta charset="utf-8"></meta>
<!-- <link th:href="@{css/bootstrap.min.css}" rel="stylesheet"></link>
	<link th:href="@{css/.css}" rel="stylesheet"></link> -->
<link href="../css/bootstrap.min.css" th:href="@{css/bootstrap.min.css}"
	rel="stylesheet"></link>
<link th:href="@{css/main.css}" rel="stylesheet"></link>
<style>
	
	#form{/* background-color: #EEEEEE; */padding-top: 30px;padding-bottom: 30px;color: #777777;width:100%;/* width: 90%;margin: 0 auto; */}
	#form label{font-size:14px;text-align: right;}
	#buttons{position: relative;top: 30px;}
	#buttons button{width: 80px;height: 35px;border-radius: 0;color: white;}
	#buttons button:hover{box-shadow:5px 8px 20px 0 #DFDFDF,-5px 8px 20px 0 #DFDFDF;}
	#buttons button[type=submit]{background: #57BAE8;margin-left: 150px;}
	#buttons button[type=reset]{background: #C0C2C5;margin-left: 30px;}
	
	#form div.checkbox label:hover{color: #00BFFF;}
	#form legend{width: 80%;} 
	/* #user{border-right: 1px solid  #e6e6e6;padding-right: 0;}
	 #other{padding-left: 50px;padding-right: 0;}  */
	#form form{width: 90%;margin:0 auto;background-color: white;padding: 50px 60px;position: relative;left: 15px;border: 1px solid  #e6e6e6;background-size: cover;}
	/* #form{width:60%;margin-top: 50px;background:transparent;color:#000;margin-bottom: 100px;} */
	/* #main #form #buttons{width: 70%;margin:0 auto;} */
	#main #form  .col-sm-5{padding-right: 0;}
	#main #form .star{text-align: left;padding-left: 5px;color: red;} 
	#main #form #school-input{display: none;}
	#form form>div{width: 70%;margin:0 auto;}
</style>	
</head>
<body>
	<!--头部开始-->

	<div th:replace="head"></div>
	<!--头部结束-->
	
	<div id="main" class="container">
		<div class="page-header">
		  <h3><a href="my-sendback">证件招领</a><small>&nbsp;>>&nbsp;发布新的招领</small>
		  <span class=" pull-right"><a id="" class="btn btn-default" href="my-sendback">查看我的招领记录</a></span>
		  </h3>
		</div>
		<div id="form" class="row">
			<form th:style="'background-image:url(' + @{img/background013.jpg} + ');'" class="form-horizontial"  onsubmit="return false"  enctype="multipart/form-data">
				<div id="user">
					<fieldset>
						<legend class="h4">证件信息</legend>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="name">
								证件姓名：
							</label>
							<div class="col-sm-5">
								<input id="name" name="name" placeholder="请输入证件姓名" type="text" class="form-control"></input>
							</div>
							<!-- <div class="col-sm-4 star" >*<span id="name-info" class="info"></span></div> -->
						</div>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="number">
								证件号码：
							</label>
							<div class="col-sm-5">
								<input id="number" name="number" placeholder="请输入证件号码" type="text" class="form-control"></input>
							</div>
							<div class="col-sm-4 star" >*<span id="number-info" class="info"></span></div>
						</div>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="certType">
								证件类型：
							</label>
							<div class="col-sm-5">
									<select id="certType" name="certType" class="form-control">
										<option value="0" selected = "selected">身份证</option>
										<option value="1">学生证</option>
										<option value="2">驾驶证</option>
										<option value="3">一卡通</option>
										<option value="4">其他证件</option>
									</select>
								</div>
							<div class="col-sm-4 star" >*<span id="password-info" class="info"></span></div>
						</div>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="info">
								证件信息：
							</label>
							<div class="col-sm-5">
								<input id="info" name="info" placeholder="请输入证件信息" type="text" class="form-control"></input>
							</div>
							<div class="col-sm-4 star" ><span id="info-info" class="info"></span></div>
						</div>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="remark">
								证件备注：
							</label>
							<div class="col-sm-5">
								<input id="remark" name="remark" placeholder="请输入证件备注" type="text" class="form-control"></input>
							</div>
							<div class="col-sm-4 star" ><span id="remark-info" class="info"></span></div>
						</div>
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="file">
								证件照片：
							</label>
							
							<div class="col-sm-5">
								<input id="file" name="file" type="file" placeholder="请上传3M以内的图片"></input>
								<input type="hidden" id="img" name="img" ></input>
							</div>
							<div class="col-sm-4 star" ><span id="file-info" class="info"></span></div>
						</div>
					</fieldset>
				</div>	
				<div id="other">
					<fieldset>
						<legend class="h4">招领信息</legend>
						
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="pickAddr">
								拾取地点：
							</label>
							<div class="col-sm-5"><input id="pickAddr" name="pickAddr" placeholder="请输入拾取地点" type="text" class="form-control"></input>
							</div>
							<div class="col-sm-4 star" ><span class="info"></span></div>
						</div>
						
						<div class="form-group row">
							<label class="col-sm-3 control-label" for="type">
								招领类型：
							</label>
							<div class="col-sm-5">
								<select id="type" name="type" class="form-control">
									<option value="0" selected = "selected">公共招领</option>
									<option value="1">校园招领</option>
								</select>
							</div>
							<div class="col-sm-4 star" ><span class="info"></span></div>
						</div>
						<div id="public-input" class="form-group row">
							<label class="col-sm-3 control-label" for="validDate">
								有效时间：
							</label>
							<div class="col-sm-5 ">
								<div class="input-group">
									<input id="validDate" name="validDate" placeholder="请输入有效时间" type="text" class="form-control"></input>
									<span class="input-group-addon">小时</span>
								</div>
								
							</div>
							<div class="col-sm-4 star" ><span class="info"></span></div>
						</div>
						<div id="school-input">
							<div class="form-group row">
								<label class="col-sm-3 control-label" for="school">
									学校名称：
								</label>
								<div class="col-sm-5">
									<select id="school" name="school" class="form-control">
										
									</select>
								</div>
								<div class="col-sm-4 star" ><span class="info"></span></div>
							</div>
							
							<div class="form-group row">
								<label class="col-sm-3 control-label" for="location">
									招领位置：
								</label>
								<div class="col-sm-5">
									<select id="location" name="location" class="form-control">
										
									</select>
								</div>
								<div class="col-sm-4 star" ><span class="info"></span></div>
							</div>
						</div>
						
					</fieldset>
				</div>
				<div id="buttons" class="row" >
					<button id="add" class="btn btn-default" type="submit">提交</button>
					<button class="btn btn-default" type="reset">重置</button>
				</div>
			</form>
		</div>
	</div>
	<!--主要内容结束-->
	<script th:src="@{js/jquery.min.js}" src="../js/jquery.min.js"></script>
	<script th:src="@{js/bootstrap.min.js}" src="../js/bootstrap.min.js"></script>
	<script th:src="@{js/ajaxfileupload.js}" src="../js/ajaxfileupload.js"></script>
	<script type="text/javascript" th:src="@{layer/layer.js}"></script>
	<script type="text/javascript" th:src="@{js/MyTimeUtils.js}"></script>
	<script type="text/javascript" th:src="@{js/MyEnumUtils.js}"></script>
	<script type="text/javascript">
		//<![CDATA[
		$(document).ready(function() {
			$("#menu-2").addClass("select")
			$("#type").change(function(){
				if($(this).val() == 1){
					$("#school-input").slideDown(1000)
					$("#public-input").slideUp(1000)
				}else{
					$("#public-input").slideDown(1000)
					$("#school-input").slideUp(1000)
				}
			})
			$("#add").click(function(){
				var oCertificate = {
					// "userId": 1,
					"number" : $("#number").val(),
					"type" : $("#certType").val(),
					"name" : $("#name").val(),
					"info" : $("#info").val(),
					"remark" : $("#remark").val(),
					"pickAddr" : $("#pickAddr").val(),
					"sendBackType" : $("#type").val(),
					"locationId": $("#location").val(),
					"img":$("#img").val(),
					"validDate": $("#validDate").val()

				}
				$.ajax({
					url : "sendBack/post.action",
					data:oCertificate,
					method:"post",
					dataType:"json",
					success : function(result) {
						layer.msg(result.message)
					}
				})
				
			})
			$("#school").change(function(){
				$.ajax({
					url : "school/getLocation.action",
					data:{"school":$("#school").val()},
					method:"get",
					dataType:"json",
					success : function(result) {
						if(result.code == "0000"){
							// console.log()
							var aLocations = result.data
							$.each(aLocations, function(i,val){
							      if(i != 0){
							      	$("#location").append('<option value="'+val.id+'">'+val.location+'</option>')
							      }else{
							      	$("#location").html('')
							      	$("#location").append('<option selected="selected" value="'+val.id+'">'+val.location+'</option>')
							      }
							 }); 
						}
					}
				})
			})
			$.ajax({
				url : "school/getSchool.action",
				method:"get",
				dataType:"json",
				success : function(result) {
					if(result.code == "0000"){
						// console.log()
						var aSchools = result.data
						$.each(aSchools, function(i,val){ 
						      if(i != 0){
						      	$("#school").append('<option value="'+val+'">'+val+'</option>')
						      }else{
						      	$("#school").append('<option selected="selected" value="'+val+'">'+val+'</option>')
						      	$("#school").change();
						      }
						 }); 
					}
				}
			})
			$("#file").change(function(){
				var fileId = [ 'file' ];
				var _this = this;
				$.ajaxFileUpload({
					type : 'post',
					dataType : 'json',
					url : "file/img/upload.action",
					secureuri : false,
					fileElementId : fileId,
					success : function(result) {
						console.log(result)
						if(result.code == "0000"){
							$("#img").val(result.data.id);
							layer.msg("照片上传成功")
                                                                                    if($("#number").val() == ''){
                                                                                        $("#number").val(result.message)
                                                                                    }
						}else{
							layer.msg(result.message)
						}
						
					}
					
				});
			});

		})
		//]]>
	</script>
</body>
</html>